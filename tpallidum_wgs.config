aws {
    // Run in the correct AWS region
    region = 'us-west-2'
    batch {
        cliPath = '/home/ec2-user/miniconda/bin/aws'
    }
}

profiles {	
    
    standard {	
        process {	
            withName: 'trimReads' {	
                cpus = 8
                memory = 16.GB	
            }	
            withName: 'filterTp' {	
                cpus = 32
                memory = 64.GB	
            }	
            withName: 'mapUnmatchedReads' {	
                cpus = 64
                memory = 128.GB	
            }	
            withName: 'mapReads' {	
                cpus = 8
                memory = 16.GB	
            }	
            withName: 'samToBam' {
                cpus = 4
                memory = 8.GB
            }
            withName: 'removeDuplicates' {
                cpus = 4
                memory = 8.GB
            }
            withName: 'callVariants' {
                cpus = 4
                memory = 8.GB
            }
            withName: 'deNovoAssembly' {	
                cpus = 8
                memory = 16.GB	
            }
            withName: 'mergeAssemblyMapping' {
                cpus = 4
                memory = 8.GB
            }
            withName: 'remapReads' {
                cpus = 4
                memory = 8.GB
            }
            withName: 'generateConsensus' {
                cpus = 16
                memory = 32.GB
            }
            withName: 'annotateConsensus' {
                cpus = 8
                memory = 16.GB
            }
        }
        aws.client.maxParallelTransfers = 2
    }

    local { 
        process {   
            withName: 'trimReads' { 
                cpus = 10   
                memory = 12.GB  
            }   
            withName: 'filterTp' {  
                cpus = 16
                memory = 32.GB  
            }   
            withName: 'mapReads' {  
                cpus = 10
                memory = 12.GB  
            }   
            withName: 'deNovoAssembly' {    
                cpus = 10   
                memory = 12.GB  
            }
            withName: 'mergeAssemblyMapping' {
                cpus = 10
                memory = 12.GB
            }
            withName: 'remapReads' {
                cpus = 1
                memory = 1.GB
            }
            withName: 'generateConsensus' {
                cpus = 1
                memory = 1.GB
            }
            withName: 'annotateConsensus' {
                cpus = 1
                memory = 1.GB
            }
        }
    }
}


tower {
  accessToken = '64a554f366b8c09f1f7a51f38192064c5e5a559e'
  enabled = true
}